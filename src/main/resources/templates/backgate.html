<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>BACKGATE</title>
	<link rel="stylesheet" href="../design/navbar.css">
	<link rel="icon" type="image/png" href="../design/icon.png">
	<script
			src="https://kit.fontawesome.com/fca84d70ac.js"
			crossorigin="anonymous"
		></script>
	<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
		font-family: "Poppins", sans-serif;
	}
	body {
		background-image: url('../design/bg.jpg');
		height: 100vh;
		background-repeat: no-repeat;
		background-position: center;
		background-size: cover;
		display: flex;
    	flex-direction: column; /* Stack elements vertically */
    }
    h1 {
    	color: white;
    	font-size:20px;
    }
    .view {
    	left: 5vw;
    	width:95vw;
	    top: 15vh; /* Start from 15vh */
	    height: 85vh; /* The height of the view container */
	    display: flex;
	    flex-direction: row; /* Arrange items vertically */
	    box-sizing: border-box;
	    position: relative;
	}
	.widgets {
	    flex: 0 0 30%;
	    display: flex;         /* To center its content */
	    justify-content: center;
	    align-items: center;
	    flex-direction: column; /* Arrange items vertically */
	    gap: 40px;
	    padding: 40px;
	}
	.slot-counter {
		height: 300px;
		width: 300px;
		background-color: transparent;
		border: 2px solid rgba(255, 255, 255, 0.5);
		border-radius: 20px;
		backdrop-filter: blur(55px);
		padding: 2rem 3rem;
		transition: all 0.5s ease-in-out;
		display: flex;
		flex-direction: column;
		justify-content: space-around;
		align-content: center;
	}
	h1 {
		text-align: center; 
	}
	.motor-counter {
		height: 300px;
		width: 300px;
		background-color: transparent;
		border: 2px solid rgba(255, 255, 255, 0.5);
		border-radius: 20px;
		backdrop-filter: blur(55px);
		padding: 2rem 3rem;
		transition: all 0.5s ease-in-out;
		display: flex;
		flex-direction: column;
		justify-content: space-around;
		align-content: center;
		align-items: center;      /* Centers content vertically */
	}
	.counter-box { 
		height: 100px;
		width: 210px;
		background-color: rgba(255, 255, 255, 1);
		border: 2px solid rgba(255, 255, 255, 08.);
		border-radius: 20px;
		backdrop-filter: blur(55px);
		transition: all 1 ease-in-out;
		display: flex;
		flex-direction: column;
		align-items: center;
		overflow: hidden;
		overflow-y: hidden;
		overflow-y: auto;
		padding: 5px;
	}
	.map {
	    width: 100%;
	    height: 100%;
	    background-repeat: no-repeat;
	    background-position: center;
	    background-size: contain;
	    transition: all 0.5s ease-in-out;
	    display: flex;
	    justify-content: center;  /* Center content horizontally */
	    align-items: center;      /* Center content vertically */
	    position: relative;       /* Allow for absolute positioning of children, if needed */
	    flex-direction :column;
	    gap:20px;
	}
	.map p{
	    font-size:40px;
	    position:absolute;
	}
	.map img{
		height:600px;
		width:850px;
	    position:absolute;
	}
	.map .button-row1, .button-row2 {
	  display: flex;                  /* Use Flexbox for the button rows */
	  justify-content: center;  /* Distribute buttons evenly */
	  align-items:center;
	  z-index: 10;                    /* Ensure buttons are on top of the image */
	  gap:40px;
	  margin:0;
	  position:relative;
	  left:8px;
	}
	
	.map .button-row1 {
	top: -80px; /* Adjust the positioning as needed */
	}
	
	.map .button-row2 {
	top: 85px; /* Adjust the positioning as needed */
	}
	
	.map-button-green, .map-button-red {
	    background-color: rgba(0, 0, 0, 0.5);
	    color: black;
	    font-size: 16px;
	    cursor: pointer;
	    z-index: 10;                    /* Ensure it's above other content */
	    height: 120px;
	    width: 110px;
	    transition: background-color 0.3s ease; /* Smooth transition on hover */
	    font-size: 0.8rem; /* Adjusts the font size */
	    background-color: rgba(0, 255, 0, 0.5); /* Light green background */
	    padding: 5px; /* Adds some padding */
	    border: 2px solid green; /* Red border */
	    border-radius: 3px; /* Slightly rounded corners */
		text-align: center;                /* Center the text */
	}
	
	.map-button-red {
	    background-color: rgba(255, 0, 0, 0.5); /* Light red background */
	    border: 2px solid #ff0000;              /* Red border */
	}
	.map-button:hover {
	    background-color: rgba(0, 0, 0, 0.7);
	}
	
	/* Optional: If you want to scale down the map and buttons when zooming out */
	@media (max-width: 1200px) {
	    .map-button {
	        transform: scale(0.8); /* Scale down the button */
	    }
	}
	.navbar .leftSide {
		margin-left:0px;
		flex: 40%;
		height: 100%;
		display: flex;
	}
	
	.navbar .rightSide {
		flex: 60%;
		justify-content: center;
		height: 100%;
		display: flex;
	}
	</style>
</head>
	<body>
	<div class="navbar">
	        <div class="leftSide">
	            <div onclick="window.location.href='/map'" class="logo-button">
				</div>
	        </div>
	        <div class="rightSide">
	        	<a href="/">MAP</a>
	        	<a href="/social">SOCIALS</a>
	            <a href="/about">ABOUT US </a>
	            <a href="/contact">CONTACT US </a>
	        </div>
	</div>
	<div class="dropdown">
		<input id="dropdown-toggle" class="dropdown-toggle">
		<label for="dropdown-toggle" class="dropdown-button"></label>
		<div class="dropdown-content">
		<a href="/profile" class="profile-button">PROFILE</a>
		<a href="/signout" class="signout-button">SIGNOUT</a>
		</div>
	</div>
	    <div class="view">
	    	<div class="widgets">
	    		<div class="slot-counter">
	    			<h1>Parking Space Available :</h1>
	    			<div class="counter-box">
	    			</div>
	    		</div>
	    		<div class="motor-counter">
	    			<h1>Motorcycle Count :</h1>
	    			<div class="counter-box">
	    				<div class="100ths">0</div>
					    <div class="10ths">0</div>
					    <div class="1ths">0</div>
	    			</div>
	    		</div>
	    	</div>
	    	<div class="map">
	    		<img src='../design/parklandscape.png' alt="Image Description">
	    		 <div class="button-row1">
				    <button id="B1" 
				            th:class="${parkingSlotService.isOccupied('B1') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B1')">B1</button>
				    <button id="B2" 
				            th:class="${parkingSlotService.isOccupied('B2') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B2')">B2</button>
				    <button id="B3" 
				            th:class="${parkingSlotService.isOccupied('B3') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B3')">B3</button>
				    <button id="B4" 
				            th:class="${parkingSlotService.isOccupied('B4') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B4')">B4</button>
				    <button id="B5" 
				            th:class="${parkingSlotService.isOccupied('B5') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B5')">B5</button>
				</div>
			    <p>BACKGATE</p>
			    <div class="button-row2">
				    <button id="B6" 
				            th:class="${parkingSlotService.isOccupied('B6') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B6')">B6</button>
				    <button id="B7" 
				            th:class="${parkingSlotService.isOccupied('B7') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B7')">B7</button>
				    <button id="B8" 
				            th:class="${parkingSlotService.isOccupied('B8') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B8')">B8</button>
				    <button id="B9" 
				            th:class="${parkingSlotService.isOccupied('B9') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B9')">B9</button>
				    <button id="B10" 
				            th:class="${parkingSlotService.isOccupied('B10') ? 'map-button-red' : 'map-button-green'}"
				            onclick="toggleOccupied('B10')">B10</button>
				</div>
			</div>
		</div>
		<script>
		    // Function to toggle the occupied state
		    function toggleOccupied(slotName) {
		        fetch(`/updateSlotStatus/${slotName}`)
		            .then(response => {
		                if (response.ok) {
		                    // Change the color of the button dynamically after the update
		                    const button = document.getElementById(slotName);
		                    button.classList.toggle('map-button-red');
		                    button.classList.toggle('map-button-green');
		                } else {
		                    alert('Error updating slot status');
		                }
		            });
		    }
		</script>
</body>
</html>