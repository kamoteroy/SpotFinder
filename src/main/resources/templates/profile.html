<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Profile</title>
		<script
			type="module"
			src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
		></script>
		<script
			nomodule
			src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
		></script>
		<script
			src="https://kit.fontawesome.com/fca84d70ac.js"
			crossorigin="anonymous"
		></script>
		<link rel="stylesheet" href="../design/style.css" />
		<link rel="stylesheet" href="../design/navbar.css" />
		<link rel="icon" type="image/png" href="../design/icon.png">
		<script>
			document.addEventListener('DOMContentLoaded', function () {
				const saveButton = document.getElementById('submit');
				const form = document.querySelector('.profile-container');
				const inputs = form.querySelectorAll('input');
				
				// Initially disable the save button
				saveButton.disabled = true;

				// Function to check if there's any change in the inputs
				function checkForChanges() {
					let formChanged = false;
					
					// Check if any input has been modified
					inputs.forEach(input => {
						if (input.value !== input.defaultValue) {
							formChanged = true;
						}
					});

					// Enable or disable the save button based on form changes
					saveButton.disabled = !formChanged;
				}

				// Add event listeners to each input field
				inputs.forEach(input => {
					input.addEventListener('input', checkForChanges);
				});
			});
		</script>
	</head>
	<style>
		.navbar .leftSide {
			margin-left:0px;
			flex: 40%;
			height: 100%;
			display: flex;
		}

		.navbar .rightSide {
			flex: 60%;
			justify-content: center;
			height: 100%;
			display: flex;
		}
		section {
		    flex: 1;
		    display: flex;
		    justify-content: center;
		    align-items: center;
		}
		.profile-container {
			height: 550px;
			width: 1000px;
			background-color: transparent;
			border: 2px solid rgba(255, 255, 255, 0.5);
			border-radius: 20px;
			backdrop-filter: blur(55px);
			padding: 2rem 3rem;
			transition: all 0.5s ease-in-out;
			display: flex;
			flex-direction: column;
			align-content: center;
		}
		h1 {
		    height: 20%; /* Take up 20% of the container's height */
		    display: flex;
		    justify-content: center;
		    align-items: center;
		}
		.profile-details {
		    display: flex;
		    flex-direction: row; /* Stack the input boxes vertically */
		    height: 50%; /* Take up the remaining 80% of the container's height */
		    justify-content: space-around; /* Space the input boxes evenly */
		}
		.profile-left, .profile-right{
			width:400px;
		}
		.profile-left, .profile-right label{
			color:white;
			font-size:20px;
		}
		.profile-left input{
			cursor: default; /* Normal arrow cursor */
		}
		button {
			width: 30%;
			height: 40px;
			border-radius: 40px;
			background-color: rgba(255, 255, 255, 1);
			border: none;
			outline: none;
			cursor: pointer;
			font-size: 1rem;
			font-weight: 600;
			transition: all 0.4s ease;
			align-self:end;
		}
		
		button:disabled {
			background-color: rgba(255, 255, 255, 0.3);
			cursor: not-allowed;
		}
		
		button:hover {
			background-color: rgba(255, 255, 255, 0.5);
		}
		.alert {
		    font-size: 0.8rem; /* Adjusts the font size */
		    color: #90ee91; /* Red color for warning */
		    background-color: rgba(0, 255, 0, 0.1); /* Light green background */
		    margin: 15px; /* Adds some padding */
		    padding: 10px; /* Adds some padding */
		    border: 1px solid green; /* Red border */
		    border-radius: 3px; /* Slightly rounded corners */
		    text-align: center; /* Center the text */
		    align-self:center;
		    width:500px;
		}
		
	</style>
	<body>
		<div class="navbar">
	        <div class="leftSide">
	            <div onclick="window.location.href='/map'" class="logo-button">
				</div>
	        </div>
	        <div class="rightSide">
	        	<a href="/">HOME</a>
	        	<a href="/social">SOCIALS</a>
	            <a href="/about">ABOUT US </a>
	            <a href="/contact">CONTACT US </a>
	        </div>
		</div>
		<div class="dropdown">
			<input id="dropdown-toggle" class="dropdown-toggle">
			<label for="dropdown-toggle" class="dropdown-button"></label>
			<div class="dropdown-content">
			<a href="/profile" class="profile-button">PROFILE</a>
			<a href="/signout" class="signout-button">SIGNOUT</a>
			</div>
		</div> 
		<section>
			<form class="profile-container" th:action="@{/updateProfile}" th:object="${user}" method="post">
				<h1>Profile</h1>
			    <div class="profile-details">
			    	<div class="profile-left">
			    		<label>ID no.</label>
				    	<div class="inputbox">
				            <ion-icon name="person-outline"></ion-icon>
				            <input
				                name="username"
				                id="username"
				                type="text"
				                th:field="*{username}"
				                readonly
				                required
				            />
				        </div>
				        <label>Name</label>
				        <div class="inputbox">
				            <ion-icon name="lock-closed-outline"></ion-icon>
				            <input
				                th:field="*{name}"
				                readonly
				                required
				            />
				        </div>
				        <label>Email</label>
				        <div class="inputbox">
				            <ion-icon name="mail-outline"></ion-icon>
				            <input
				                th:field="*{email}"
				                readonly
				                required
				            />
				        </div>
			    	</div>
			        <div class="profile-right">
			        	<label>Address</label>
			        	<div class="inputbox">
				            <ion-icon name="location-outline"></ion-icon>
				            <input
				                name="username"
				                id="username"
				                type="text"
				                th:field="*{address}"
				                required
				            />
				        </div>
				        <label>Contact Number</label>
				        <div class="inputbox">
				            <ion-icon name="call-outline"></ion-icon>
				            <input
				                th:field="*{contact}"
				                required
				            />
				        </div>
				        <label>Emergency Contact Number</label>
				        <div class="inputbox">
				            <ion-icon name="call-outline"></ion-icon>
				            <input
				                th:field="*{econtact}"
				                required
				            />
				        </div>
			    	</div>
			    </div>
			    <button id="submit" type="submit" disabled>Save</button>
			    <div th:if="${message != null}" class="alert">
			        <span th:text="${message}"></span>
			    </div>
			</form>
		</section>
	</body>
</html>
